[1.59][cherry-pick] Simplify private generics check (#24108) · MystenLabs/sui@be94dd3 · GitHub



[Skip to content](#start-of-content)








## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FMystenLabs%2Fsui%2Fcommit%2Fbe94dd334013778401c035a04dd6b7bcc5c17121)

Appearance settings

Search or jump to...


# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.


Include my email address so I can be contacted

Cancel
 Submit feedback





# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

Cancel
 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FMystenLabs%2Fsui%2Fcommit%2Fbe94dd334013778401c035a04dd6b7bcc5c17121)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fcommit%2Fshow&source=header-repo&source_repo=MystenLabs%2Fsui)

Appearance settings

Resetting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.
 


Dismiss alert

{{ message }}

[MystenLabs](/MystenLabs) 
/
**[sui](/MystenLabs/sui)**
Public

* [Notifications](/login?return_to=%2FMystenLabs%2Fsui) You must be signed in to change notification settings
* [Fork
  11.7k](/login?return_to=%2FMystenLabs%2Fsui)
* [Star
   7.5k](/login?return_to=%2FMystenLabs%2Fsui)

# Commit be94dd3

[Browse files](/MystenLabs/sui/tree/be94dd334013778401c035a04dd6b7bcc5c17121)Browse files

[![tnowacki](https://avatars.githubusercontent.com/u/1753366?v=4&size=40)](/tnowacki)[tnowacki](/MystenLabs/sui/commits?author=tnowacki)

authored

[1.59][cherry-pick] Simplify private generics check ([#24108](https://github.com/MystenLabs/sui/pull/24108))

## Description
- We plan on adding more "internal" functions, and rewriting this now
will help us get more of these new functions out next release (and we
really should have done this a long time ago)
## Test plan
- Updated test error messages
---
## Release notes
Check each box that your changes affect. If none of the boxes relate to
your changes, release notes aren't required.
For each box you select, include information after the relevant heading
that describes the impact of your changes that a user might notice and
any actions they must take to implement updates.
- [ ] Protocol:
- [ ] Nodes (Validators and Full nodes):
- [ ] gRPC:
- [ ] JSON-RPC:
- [ ] GraphQL:
- [ ] CLI:
- [ ] Rust SDK:

```move
1 parent bac09b6 commit be94dd3

Copy full SHA for be94dd3
```

## File tree

Expand file treeCollapse file tree

## 35 files changed

+512

-107

lines changed

Open diff view settings

Filter options

* crates

  + sui-adapter-transactional-tests/tests

    - party

      * [private\_transfer\_ptb.snap](#diff-5ca709f6cb54624d5d99485831774a66cfad1f12652b7328c7083b7262e5888d)
      * [private\_transfer\_ptb@v2.snap](#diff-4d6fbae5181640dda7fdcfe39e10a1002011df9941efdd4ae9b7e478d3fb7649)
    - programmable

      * [cannot\_call\_emit.snap](#diff-565232e514b61dc8a5a2e1fbf959715fdf33a608e10ec4168a26168d09f078b2)
      * [cannot\_call\_emit@v2.snap](#diff-c50361b257a6c5c08d6f132cd7fc57b35a5f25d8fb4a1a298a6d2da1061b031b)
      * [cannot\_call\_emit\_authenticated.snap](#diff-4eb6f2c333855dbefee6bb83109d1a117fa4fce74c2fcbb580ba9017ff4645c7)
      * [cannot\_call\_emit\_authenticated@v2.snap](#diff-4549175743a943c875d68110c15a81b3d646fb497db0067373c254b53ba43f6c)
      * [private\_transfer\_invalid.snap](#diff-26ae5b64c090cc2af72e0fe38950bfe2630bd83e4496203ed11c72090ac84908)
      * [private\_transfer\_invalid@v2.snap](#diff-b803af8bac55ddd83022d480ccdecfc9f5d4841dce53ac71137e5ac4d6b4ae7b)
    - transfer\_object

      * [does\_not\_have\_store\_receive.snap](#diff-d11ac75ec5f3e25664f0c693785025a064486a99629285045594f0033685ace2)
      * [does\_not\_have\_store\_receive@v2.snap](#diff-de42eb13882e95cde1b420cdca375f4b7e73bbd28c0012017b088c33b59d2123)
  + sui-open-rpc/spec

    - [openrpc.json](#diff-8e6cee90a5dd9b610c3146fdb6fdd5e4215bfbb2cb634f4b099c74c9408c8c1d)
  + sui-protocol-config/src

    - [lib.rs](#diff-192add9c4d4ccc2ca9fc09a7309312d12593d58089ad08f51d17fa4b312719a2)
    - snapshots

      * [sui\_protocol\_config\_\_test\_\_Mainnet\_version\_100.snap](#diff-2f60c56d846f6625a6103add69ce4149f4eec62d8fb98996c9b2fbe2a00b7aff)
      * [sui\_protocol\_config\_\_test\_\_Testnet\_version\_100.snap](#diff-a382ab03fe6a3e90fd9734196027aa33daa774b96681e0e09351f4bc80e91345)
      * [sui\_protocol\_config\_\_test\_\_version\_100.snap](#diff-e939d6b113d75d05e9ef6f60b0e3844568798dbf8911951cd3636c1c6af41673)
  + sui-verifier-transactional-tests/tests

    - private\_generics

      * [new\_currency.snap](#diff-6d3fd32e5f63d4474aaa2f49233629a2410c17b536b32d38f858e36e1ac74f33)
      * [no\_public\_transfer.snap](#diff-1ce6b6b9d47809ec968d850905cbcc4171ced9dd971819bb8599c67a7ca20591)
      * [no\_public\_transfer\_explicit.snap](#diff-1c63b2e2860594732a4f7f70fd3301b5f3b197385fc284099a7be2aebf99b029)
      * [no\_public\_transfer\_generic.snap](#diff-9c8063bdc763093d2db50d160603bc57b01a91ad9156db059b740a2baaede6f8)
      * [no\_public\_transfer\_store.snap](#diff-612a455d7791d085475ecc9f03bb7298f53ac8f74ca31925b7887fc37964a47d)
      * [no\_public\_transfer\_store\_generic.snap](#diff-0e9f247db9183256c32bda5d8c0e6cd675b43130e718e3c6240213a466984435)
      * [private\_event\_emit.snap](#diff-3baa358e99817ffd0c98a577671d1445130265c36024f5ef93d4de3afd64a4d4)
      * [receive\_with\_and\_without\_store.snap](#diff-2ec15cc9dee1f5a281a563839050b5b082f779e1323bd3c8318ea7def94b4a7c)
    - private\_transfer

      * [transfer\_invalid.snap](#diff-147deee843c3d6b5836597829c317fef990e34a35a3bf0a56afc053d92f62a8e)
* external-crates/move

  + crates

    - bytecode-verifier-tests/src/unit\_tests

      * [mod.rs](#diff-8d771fffa482597c22429d35ee9d3799eda3a5e6a8860b20b83d08fcc610b293)
    - move-vm-config/src

      * [verifier.rs](#diff-8fbe25fdfbde5135e08e05db71a5b6d2fbc4fa90f1b8c572a838950695e03806)
  + move-execution

    - v0/crates/bytecode-verifier-tests/src/unit\_tests

      * [mod.rs](#diff-a5ada6b166ba243a3d09abd8b263f50c285afa58c3ea927ba5159b622bc5b3f5)
    - v1/crates/bytecode-verifier-tests/src/unit\_tests

      * [mod.rs](#diff-2ddb4e53069c4e8ae250673f988705d8247627edd3373e52d6a1a8b891693296)
    - v2/crates/bytecode-verifier-tests/src/unit\_tests

      * [mod.rs](#diff-47677ec2959df0a275a9c8c67350cee7d45deec9d3c3a5f11b0a1ce1dec94f45)
* sui-execution/latest

  + sui-adapter/src

    - programmable\_transactions

      * [execution.rs](#diff-140c754fef8dad805eb34747a15f3313bda7b3a71a6ad0918b4807be27a2274a)
    - static\_programmable\_transactions/typing/verify

      * [move\_functions.rs](#diff-95bdbe42ee0cb82894ec5a9ebe0be2843f179558a5354d76a0cf8cf5759d68cb)
  + sui-verifier/src

    - [id\_leak\_verifier.rs](#diff-0a013e0e1ee8b8a7f9f21b7ac058acbf3a855600bf36b75cbeaf7e8e5252928b)
    - [lib.rs](#diff-b9bbb37547c92cc55bc04881299bbdd33eb77391a1661d99d7560908f47cd9ab)
    - [private\_generics\_verifier\_v2.rs](#diff-31ba219640be54652c6375c45898d8be416746aa57370fe57ca1de0ffcd591f2)
    - [verifier.rs](#diff-b92c7c39dde0eb3f885bbaf4cb693803fa50779d1bde1758b4462b06464458fa)

Expand file treeCollapse file tree

## 35 files changed

+512

-107

lines changed

Open diff view settings

Collapse file

### [`‎crates/sui-adapter-transactional-tests/tests/party/private_transfer_ptb.snap‎`](#diff-5ca709f6cb54624d5d99485831774a66cfad1f12652b7328c7083b7262e5888d)

Copy file name to clipboardExpand all lines: crates/sui-adapter-transactional-tests/tests/party/private\_transfer\_ptb.snap

+2-2Lines changed: 2 additions & 2 deletions

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| `@@ -38,12 +38,12 @@ task 5, lines 36-40:` | | | |
| `38` | `38` | `//> sui::transfer::party_transfer<ex::m::Priv>(Input(0), Result(0))` |
| `39` | `39` | `// Private transfer` |
| `40` | `40` | `Error: Transaction Effects Status: Non Entry Function Invoked. Move Call must start with an entry function` |
| `41` |  | `- Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call sui::transfer::party_transfer. Use the public variant instead, sui::transfer::public_party_transfer"), command: Some(1) } }` |
|  | `41` | `+ Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call function 'sui::transfer::party_transfer' since type parameter #0 can only be instantiated with types defined within the caller's module. If the type has the 'store' ability, use the public variant instead: 'sui::transfer::public_party_transfer'."), command: Some(1) } }` |
| `42` | `42` |  |
| `43` | `43` | `task 6, lines 41-44:` |
| `44` | `44` | `//# programmable --inputs @0` |
| `45` | `45` | `//> 0: ex::m::priv();` |
| `46` | `46` | `//> 1: sui::party::single_owner(Input(0));` |
| `47` | `47` | `//> sui::transfer::party_transfer<ex::m::Priv>(Result(0), Result(1))` |
| `48` | `48` | `Error: Transaction Effects Status: Non Entry Function Invoked. Move Call must start with an entry function` |
| `49` |  | `- Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call sui::transfer::party_transfer. Use the public variant instead, sui::transfer::public_party_transfer"), command: Some(2) } }` |
|  | `49` | `+ Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call function 'sui::transfer::party_transfer' since type parameter #0 can only be instantiated with types defined within the caller's module. If the type has the 'store' ability, use the public variant instead: 'sui::transfer::public_party_transfer'."), command: Some(2) } }` |

Collapse file

### [`‎crates/sui-adapter-transactional-tests/tests/party/private_transfer_ptb@v2.snap‎`](#diff-4d6fbae5181640dda7fdcfe39e10a1002011df9941efdd4ae9b7e478d3fb7649)

Copy file name to clipboardExpand all lines: crates/sui-adapter-transactional-tests/tests/party/private\_transfer\_ptb@v2.snap

+2-2Lines changed: 2 additions & 2 deletions

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| `@@ -38,12 +38,12 @@ task 5, lines 36-40:` | | | |
| `38` | `38` | `//> sui::transfer::party_transfer<ex::m::Priv>(Input(0), Result(0))` |
| `39` | `39` | `// Private transfer` |
| `40` | `40` | `Error: Transaction Effects Status: Non Entry Function Invoked. Move Call must start with an entry function` |
| `41` |  | `- Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call sui::transfer::party_transfer. Use the public variant instead, sui::transfer::public_party_transfer"), command: Some(1) } }` |
|  | `41` | `+ Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call function 'sui::transfer::party_transfer' since type parameter #0 can only be instantiated with types defined within the caller's module. If the type has the 'store' ability, use the public variant instead: 'sui::transfer::public_party_transfer'."), command: Some(1) } }` |
| `42` | `42` |  |
| `43` | `43` | `task 6, lines 41-44:` |
| `44` | `44` | `//# programmable --inputs @0` |
| `45` | `45` | `//> 0: ex::m::priv();` |
| `46` | `46` | `//> 1: sui::party::single_owner(Input(0));` |
| `47` | `47` | `//> sui::transfer::party_transfer<ex::m::Priv>(Result(0), Result(1))` |
| `48` | `48` | `Error: Transaction Effects Status: Non Entry Function Invoked. Move Call must start with an entry function` |
| `49` |  | `- Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call sui::transfer::party_transfer. Use the public variant instead, sui::transfer::public_party_transfer"), command: Some(2) } }` |
|  | `49` | `+ Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call function 'sui::transfer::party_transfer' since type parameter #0 can only be instantiated with types defined within the caller's module. If the type has the 'store' ability, use the public variant instead: 'sui::transfer::public_party_transfer'."), command: Some(2) } }` |

Collapse file

### [`‎crates/sui-adapter-transactional-tests/tests/programmable/cannot_call_emit.snap‎`](#diff-565232e514b61dc8a5a2e1fbf959715fdf33a608e10ec4168a26168d09f078b2)

Copy file name to clipboardExpand all lines: crates/sui-adapter-transactional-tests/tests/programmable/cannot\_call\_emit.snap

+2-2Lines changed: 2 additions & 2 deletions

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| `@@ -17,15 +17,15 @@ task 2, lines 14-16:` | | | |
| `17` | `17` | `//> 0: test::m1::a();` |
| `18` | `18` | `//> sui::event::emit<test::m1::A>(Result(0));` |
| `19` | `19` | `Error: Transaction Effects Status: Non Entry Function Invoked. Move Call must start with an entry function` |
| `20` |  | `- Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call functions in sui::event"), command: Some(1) } }` |
|  | `20` | `+ Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call function 'sui::event::emit' since type parameter #0 can only be instantiated with types defined within the caller's module."), command: Some(1) } }` |
| `21` | `21` |  |
| `22` | `22` | `task 3, lines 18-21:` |
| `23` | `23` | `//# programmable` |
| `24` | `24` | `//> 0: test::m1::a();` |
| `25` | `25` | `// wrong type annotation did not matter in v1 of PTB execution` |
| `26` | `26` | `//> sui::event::emit<bool>(Result(0));` |
| `27` | `27` | `Error: Transaction Effects Status: Non Entry Function Invoked. Move Call must start with an entry function` |
| `28` |  | `- Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call functions in sui::event"), command: Some(1) } }` |
|  | `28` | `+ Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call function 'sui::event::emit' since type parameter #0 can only be instantiated with types defined within the caller's module."), command: Some(1) } }` |
| `29` | `29` |  |
| `30` | `30` | `task 4, lines 23-26:` |
| `31` | `31` | `//# programmable` |
|  | | | |

Collapse file

### [`‎crates/sui-adapter-transactional-tests/tests/programmable/cannot_call_emit@v2.snap‎`](#diff-c50361b257a6c5c08d6f132cd7fc57b35a5f25d8fb4a1a298a6d2da1061b031b)

Copy file name to clipboardExpand all lines: crates/sui-adapter-transactional-tests/tests/programmable/cannot\_call\_emit@v2.snap

+1-1Lines changed: 1 addition & 1 deletion

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| `@@ -17,7 +17,7 @@ task 2, lines 14-16:` | | | |
| `17` | `17` | `//> 0: test::m1::a();` |
| `18` | `18` | `//> sui::event::emit<test::m1::A>(Result(0));` |
| `19` | `19` | `Error: Transaction Effects Status: Non Entry Function Invoked. Move Call must start with an entry function` |
| `20` |  | `- Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call functions in sui::event"), command: Some(1) } }` |
|  | `20` | `+ Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call function 'sui::event::emit' since type parameter #0 can only be instantiated with types defined within the caller's module."), command: Some(1) } }` |
| `21` | `21` |  |
| `22` | `22` | `task 3, lines 18-21:` |
| `23` | `23` | `//# programmable` |
|  | | | |

Collapse file

### [`‎crates/sui-adapter-transactional-tests/tests/programmable/cannot_call_emit_authenticated.snap‎`](#diff-4eb6f2c333855dbefee6bb83109d1a117fa4fce74c2fcbb580ba9017ff4645c7)

Copy file name to clipboardExpand all lines: crates/sui-adapter-transactional-tests/tests/programmable/cannot\_call\_emit\_authenticated.snap

+2-2Lines changed: 2 additions & 2 deletions

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| `@@ -17,15 +17,15 @@ task 2, lines 14-16:` | | | |
| `17` | `17` | `//> 0: test::m1::a();` |
| `18` | `18` | `//> sui::event::emit_authenticated<test::m1::A>(Result(0));` |
| `19` | `19` | `Error: Transaction Effects Status: Non Entry Function Invoked. Move Call must start with an entry function` |
| `20` |  | `- Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call functions in sui::event"), command: Some(1) } }` |
|  | `20` | `+ Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call function 'sui::event::emit_authenticated' since type parameter #0 can only be instantiated with types defined within the caller's module."), command: Some(1) } }` |
| `21` | `21` |  |
| `22` | `22` | `task 3, lines 18-21:` |
| `23` | `23` | `//# programmable` |
| `24` | `24` | `//> 0: test::m1::a();` |
| `25` | `25` | `// wrong type annotation did not matter in v1 of PTB execution` |
| `26` | `26` | `//> sui::event::emit_authenticated<bool>(Result(0));` |
| `27` | `27` | `Error: Transaction Effects Status: Non Entry Function Invoked. Move Call must start with an entry function` |
| `28` |  | `- Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call functions in sui::event"), command: Some(1) } }` |
|  | `28` | `+ Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call function 'sui::event::emit_authenticated' since type parameter #0 can only be instantiated with types defined within the caller's module."), command: Some(1) } }` |
| `29` | `29` |  |
| `30` | `30` | `task 4, lines 23-26:` |
| `31` | `31` | `//# programmable` |
|  | | | |

Collapse file

### [`‎crates/sui-adapter-transactional-tests/tests/programmable/cannot_call_emit_authenticated@v2.snap‎`](#diff-4549175743a943c875d68110c15a81b3d646fb497db0067373c254b53ba43f6c)

Copy file name to clipboardExpand all lines: crates/sui-adapter-transactional-tests/tests/programmable/cannot\_call\_emit\_authenticated@v2.snap

+1-1Lines changed: 1 addition & 1 deletion

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| `@@ -17,7 +17,7 @@ task 2, lines 14-16:` | | | |
| `17` | `17` | `//> 0: test::m1::a();` |
| `18` | `18` | `//> sui::event::emit_authenticated<test::m1::A>(Result(0));` |
| `19` | `19` | `Error: Transaction Effects Status: Non Entry Function Invoked. Move Call must start with an entry function` |
| `20` |  | `- Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call functions in sui::event"), command: Some(1) } }` |
|  | `20` | `+ Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call function 'sui::event::emit_authenticated' since type parameter #0 can only be instantiated with types defined within the caller's module."), command: Some(1) } }` |
| `21` | `21` |  |
| `22` | `22` | `task 3, lines 18-21:` |
| `23` | `23` | `//# programmable` |
|  | | | |

Collapse file

### [`‎crates/sui-adapter-transactional-tests/tests/programmable/private_transfer_invalid.snap‎`](#diff-26ae5b64c090cc2af72e0fe38950bfe2630bd83e4496203ed11c72090ac84908)

Copy file name to clipboardExpand all lines: crates/sui-adapter-transactional-tests/tests/programmable/private\_transfer\_invalid.snap

+6-6Lines changed: 6 additions & 6 deletions

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| `@@ -17,44 +17,44 @@ task 2, lines 19-21:` | | | |
| `17` | `17` | `//> 0: test::m1::pub();` |
| `18` | `18` | `//> sui::transfer::transfer<test::m1::Pub>(Result(0), Input(0));` |
| `19` | `19` | `Error: Transaction Effects Status: Non Entry Function Invoked. Move Call must start with an entry function` |
| `20` |  | `- Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call sui::transfer::transfer. Use the public variant instead, sui::transfer::public_transfer"), command: Some(1) } }` |
|  | `20` | `+ Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call function 'sui::transfer::transfer' since type parameter #0 can only be instantiated with types defined within the caller's module. If the type has the 'store' ability, use the public variant instead: 'sui::transfer::public_transfer'."), command: Some(1) } }` |
| `21` | `21` |  |
| `22` | `22` | `task 3, lines 23-25:` |
| `23` | `23` | `//# programmable` |
| `24` | `24` | `//> 0: test::m1::pub();` |
| `25` | `25` | `//> sui::transfer::share_object<test::m1::Pub>(Result(0));` |
| `26` | `26` | `Error: Transaction Effects Status: Non Entry Function Invoked. Move Call must start with an entry function` |
| `27` |  | `- Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call sui::transfer::share_object. Use the public variant instead, sui::transfer::public_share_object"), command: Some(1) } }` |
|  | `27` | `+ Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call function 'sui::transfer::share_object' since type parameter #0 can only be instantiated with types defined within the caller's module. If the type has the 'store' ability, use the public variant instead: 'sui::transfer::public_share_object'."), command: Some(1) } }` |
| `28` | `28` |  |
| `29` | `29` | `task 4, lines 27-32:` |
| `30` | `30` | `//# programmable` |
| `31` | `31` | `//> 0: test::m1::pub();` |
| `32` | `32` | `//> sui::transfer::freeze_object<test::m1::Pub>(Result(0));` |
| `33` | `33` | `// Does not have store, cannot be used with internal variants` |
| `34` | `34` | `Error: Transaction Effects Status: Non Entry Function Invoked. Move Call must start with an entry function` |
| `35` |  | `- Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call sui::transfer::freeze_object. Use the public variant instead, sui::transfer::public_freeze_object"), command: Some(1) } }` |
|  | `35` | `+ Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call function 'sui::transfer::freeze_object' since type parameter #0 can only be instantiated with types defined within the caller's module. If the type has the 'store' ability, use the public variant instead: 'sui::transfer::public_freeze_object'."), command: Some(1) } }` |
| `36` | `36` |  |
| `37` | `37` | `task 5, lines 34-36:` |
| `38` | `38` | `//# programmable --sender A --inputs @A` |
| `39` | `39` | `//> 0: test::m1::priv();` |
| `40` | `40` | `//> sui::transfer::transfer<test::m1::Priv>(Result(0), Input(0));` |
| `41` | `41` | `Error: Transaction Effects Status: Non Entry Function Invoked. Move Call must start with an entry function` |
| `42` |  | `- Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call sui::transfer::transfer. Use the public variant instead, sui::transfer::public_transfer"), command: Some(1) } }` |
|  | `42` | `+ Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call function 'sui::transfer::transfer' since type parameter #0 can only be instantiated with types defined within the caller's module. If the type has the 'store' ability, use the public variant instead: 'sui::transfer::public_transfer'."), command: Some(1) } }` |
| `43` | `43` |  |
| `44` | `44` | `task 6, lines 38-40:` |
| `45` | `45` | `//# programmable` |
| `46` | `46` | `//> 0: test::m1::priv();` |
| `47` | `47` | `//> sui::transfer::share_object<test::m1::Priv>(Result(0));` |
| `48` | `48` | `Error: Transaction Effects Status: Non Entry Function Invoked. Move Call must start with an entry function` |
| `49` |  | `- Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call sui::transfer::share_object. Use the public variant instead, sui::transfer::public_share_object"), command: Some(1) } }` |
|  | `49` | `+ Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call function 'sui::transfer::share_object' since type parameter #0 can only be instantiated with types defined within the caller's module. If the type has the 'store' ability, use the public variant instead: 'sui::transfer::public_share_object'."), command: Some(1) } }` |
| `50` | `50` |  |
| `51` | `51` | `task 7, lines 42-47:` |
| `52` | `52` | `//# programmable` |
| `53` | `53` | `//> 0: test::m1::priv();` |
| `54` | `54` | `//> sui::transfer::freeze_object<test::m1::Priv>(Result(0));` |
| `55` | `55` | `// Does not have store, cannot be used with public variants` |
| `56` | `56` | `Error: Transaction Effects Status: Non Entry Function Invoked. Move Call must start with an entry function` |
| `57` |  | `- Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call sui::transfer::freeze_object. Use the public variant instead, sui::transfer::public_freeze_object"), command: Some(1) } }` |
|  | `57` | `+ Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call function 'sui::transfer::freeze_object' since type parameter #0 can only be instantiated with types defined within the caller's module. If the type has the 'store' ability, use the public variant instead: 'sui::transfer::public_freeze_object'."), command: Some(1) } }` |
| `58` | `58` |  |
| `59` | `59` | `task 8, lines 49-51:` |
| `60` | `60` | `//# programmable --sender A --inputs @A` |
|  | | | |

Collapse file

### [`‎crates/sui-adapter-transactional-tests/tests/programmable/private_transfer_invalid@v2.snap‎`](#diff-b803af8bac55ddd83022d480ccdecfc9f5d4841dce53ac71137e5ac4d6b4ae7b)

Copy file name to clipboardExpand all lines: crates/sui-adapter-transactional-tests/tests/programmable/private\_transfer\_invalid@v2.snap

+6-6Lines changed: 6 additions & 6 deletions

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| `@@ -17,44 +17,44 @@ task 2, lines 19-21:` | | | |
| `17` | `17` | `//> 0: test::m1::pub();` |
| `18` | `18` | `//> sui::transfer::transfer<test::m1::Pub>(Result(0), Input(0));` |
| `19` | `19` | `Error: Transaction Effects Status: Non Entry Function Invoked. Move Call must start with an entry function` |
| `20` |  | `- Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call sui::transfer::transfer. Use the public variant instead, sui::transfer::public_transfer"), command: Some(1) } }` |
|  | `20` | `+ Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call function 'sui::transfer::transfer' since type parameter #0 can only be instantiated with types defined within the caller's module. If the type has the 'store' ability, use the public variant instead: 'sui::transfer::public_transfer'."), command: Some(1) } }` |
| `21` | `21` |  |
| `22` | `22` | `task 3, lines 23-25:` |
| `23` | `23` | `//# programmable` |
| `24` | `24` | `//> 0: test::m1::pub();` |
| `25` | `25` | `//> sui::transfer::share_object<test::m1::Pub>(Result(0));` |
| `26` | `26` | `Error: Transaction Effects Status: Non Entry Function Invoked. Move Call must start with an entry function` |
| `27` |  | `- Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call sui::transfer::share_object. Use the public variant instead, sui::transfer::public_share_object"), command: Some(1) } }` |
|  | `27` | `+ Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call function 'sui::transfer::share_object' since type parameter #0 can only be instantiated with types defined within the caller's module. If the type has the 'store' ability, use the public variant instead: 'sui::transfer::public_share_object'."), command: Some(1) } }` |
| `28` | `28` |  |
| `29` | `29` | `task 4, lines 27-32:` |
| `30` | `30` | `//# programmable` |
| `31` | `31` | `//> 0: test::m1::pub();` |
| `32` | `32` | `//> sui::transfer::freeze_object<test::m1::Pub>(Result(0));` |
| `33` | `33` | `// Does not have store, cannot be used with internal variants` |
| `34` | `34` | `Error: Transaction Effects Status: Non Entry Function Invoked. Move Call must start with an entry function` |
| `35` |  | `- Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call sui::transfer::freeze_object. Use the public variant instead, sui::transfer::public_freeze_object"), command: Some(1) } }` |
|  | `35` | `+ Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call function 'sui::transfer::freeze_object' since type parameter #0 can only be instantiated with types defined within the caller's module. If the type has the 'store' ability, use the public variant instead: 'sui::transfer::public_freeze_object'."), command: Some(1) } }` |
| `36` | `36` |  |
| `37` | `37` | `task 5, lines 34-36:` |
| `38` | `38` | `//# programmable --sender A --inputs @A` |
| `39` | `39` | `//> 0: test::m1::priv();` |
| `40` | `40` | `//> sui::transfer::transfer<test::m1::Priv>(Result(0), Input(0));` |
| `41` | `41` | `Error: Transaction Effects Status: Non Entry Function Invoked. Move Call must start with an entry function` |
| `42` |  | `- Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call sui::transfer::transfer. Use the public variant instead, sui::transfer::public_transfer"), command: Some(1) } }` |
|  | `42` | `+ Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call function 'sui::transfer::transfer' since type parameter #0 can only be instantiated with types defined within the caller's module. If the type has the 'store' ability, use the public variant instead: 'sui::transfer::public_transfer'."), command: Some(1) } }` |
| `43` | `43` |  |
| `44` | `44` | `task 6, lines 38-40:` |
| `45` | `45` | `//# programmable` |
| `46` | `46` | `//> 0: test::m1::priv();` |
| `47` | `47` | `//> sui::transfer::share_object<test::m1::Priv>(Result(0));` |
| `48` | `48` | `Error: Transaction Effects Status: Non Entry Function Invoked. Move Call must start with an entry function` |
| `49` |  | `- Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call sui::transfer::share_object. Use the public variant instead, sui::transfer::public_share_object"), command: Some(1) } }` |
|  | `49` | `+ Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call function 'sui::transfer::share_object' since type parameter #0 can only be instantiated with types defined within the caller's module. If the type has the 'store' ability, use the public variant instead: 'sui::transfer::public_share_object'."), command: Some(1) } }` |
| `50` | `50` |  |
| `51` | `51` | `task 7, lines 42-47:` |
| `52` | `52` | `//# programmable` |
| `53` | `53` | `//> 0: test::m1::priv();` |
| `54` | `54` | `//> sui::transfer::freeze_object<test::m1::Priv>(Result(0));` |
| `55` | `55` | `// Does not have store, cannot be used with public variants` |
| `56` | `56` | `Error: Transaction Effects Status: Non Entry Function Invoked. Move Call must start with an entry function` |
| `57` |  | `- Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call sui::transfer::freeze_object. Use the public variant instead, sui::transfer::public_freeze_object"), command: Some(1) } }` |
|  | `57` | `+ Execution Error: ExecutionError: ExecutionError { inner: ExecutionErrorInner { kind: NonEntryFunctionInvoked, source: Some("Cannot directly call function 'sui::transfer::freeze_object' since type parameter #0 can only be instantiated with types defined within the caller's module. If the type has the 'store' ability, use the public variant instead: 'sui::transfer::public_freeze_object'."), command: Some(1) } }` |
| `58` | `58` |  |
| `59` | `59` | `task 8, lines 49-51:` |
| `60` | `60` | `//# programmable --sender A --inputs @A` |
|  | | | |

## 0 commit comments

Comments

0 (0)

You can’t perform that action at this time.