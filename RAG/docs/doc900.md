[graphql-alt] Load just-published packages within Object::with\_address by tpham-mysten · Pull Request #23928 · MystenLabs/sui · GitHub



[Skip to content](#start-of-content)







## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FMystenLabs%2Fsui%2Fpull%2F23928)

Appearance settings

Search or jump to...


# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.


Include my email address so I can be contacted

Cancel
 Submit feedback





# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

Cancel
 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FMystenLabs%2Fsui%2Fpull%2F23928)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=MystenLabs%2Fsui)

Appearance settings

Resetting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.
 


Dismiss alert

{{ message }}

[MystenLabs](/MystenLabs) 
/
**[sui](/MystenLabs/sui)**
Public

* [Notifications](/login?return_to=%2FMystenLabs%2Fsui) You must be signed in to change notification settings
* [Fork
  11.7k](/login?return_to=%2FMystenLabs%2Fsui)
* [Star
   7.5k](/login?return_to=%2FMystenLabs%2Fsui)

# [graphql-alt] Load just-published packages within Object::with\_address #23928

New issue

 

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

[Sign up for GitHub](/signup?return_to=%2FMystenLabs%2Fsui%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2FMystenLabs%2Fsui%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

Merged

[tpham-mysten](/tpham-mysten)
merged 8 commits into
[main](/MystenLabs/sui/tree/main "MystenLabs/sui:main")
from
[graphql-alt-package-execution-context](/MystenLabs/sui/tree/graphql-alt-package-execution-context "MystenLabs/sui:graphql-alt-package-execution-context")








Dec 1, 2025

Merged

# [[graphql-alt] Load just-published packages within Object::with\_address](#top) #23928

[tpham-mysten](/tpham-mysten)
merged 8 commits into
[main](/MystenLabs/sui/tree/main "MystenLabs/sui:main")
from
[graphql-alt-package-execution-context](/MystenLabs/sui/tree/graphql-alt-package-execution-context "MystenLabs/sui:graphql-alt-package-execution-context")








Dec 1, 2025

### Uh oh!

There was an error while loading. Please reload this page.

## Conversation

This file contains hidden or bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

[Show hidden characters]({{ revealButtonHref }})








[![@tpham-mysten](https://avatars.githubusercontent.com/u/214580142?s=80&v=4)](/tpham-mysten)

Copy link

Contributor

### @tpham-mysten **[tpham-mysten](/tpham-mysten)** commented [Oct 14, 2025](#issue-3514027074) • edited Loading Uh oh! There was an error while loading. Please reload this page.

## Description

Currently, package queries that stem from simulated transactions produce null outputs because they do not currently pay attention to the new objects produced by the transaction. Support for reading from these new objects has been added to the Object load paths, but although MovePackages are objects, they are typically fetched from the kv\_packages table, which also needs to consult the transaction's output objects.

This PR fixes that problem by adding a logic to `MovePackage::with_address` to load the latest object version for a given address.

## Test plan

How did you test the new or updated feature?

```move
cargo nextest run -p sui-indexer-alt-e2e-tests
cargo nextest run -p sui-indexer-alt-framework
```

---

## Release notes

Check each box that your changes affect. If none of the boxes relate to your changes, release notes aren't required.

For each box you select, include information after the relevant heading that describes the impact of your changes that a user might notice and any actions they must take to implement updates.

* Protocol:
* Nodes (Validators and Full nodes):
* gRPC:
* JSON-RPC:
* GraphQL: Removed `events` field from `SimulationResult`. Events are now only accessible via `effects.events()` to eliminate redundancy.
* CLI:
* Rust SDK:

Sorry, something went wrong.

### Uh oh!

There was an error while loading. Please reload this page.

All reactions

[![@tpham-mysten](https://avatars.githubusercontent.com/u/214580142?s=40&u=934afb3c6ace1db6656b73c6f5310cd8205079a3&v=4)](/tpham-mysten)
[tpham-mysten](/tpham-mysten)
requested a review
from a team
as a [code owner](/MystenLabs/sui/blob/f8f50e5decdb9bf1f07cbe5044873ed643edbd07/.github/CODEOWNERS#L20)
[October 14, 2025 13:44](#event-20270504295)

[![@tpham-mysten](https://avatars.githubusercontent.com/u/214580142?s=40&u=934afb3c6ace1db6656b73c6f5310cd8205079a3&v=4)](/tpham-mysten)
[tpham-mysten](/tpham-mysten)
requested review from
[amnn](/amnn),
[emmazzz](/emmazzz),
[evan-wall-mysten](/evan-wall-mysten),
[henryachen](/henryachen) and
[wlmyng](/wlmyng)
[October 14, 2025 13:44](#event-20270504470)

[![@tpham-mysten](https://avatars.githubusercontent.com/u/214580142?s=40&u=934afb3c6ace1db6656b73c6f5310cd8205079a3&v=4)](/tpham-mysten)
[tpham-mysten](/tpham-mysten)
[temporarily deployed](https://github.com/MystenLabs/sui/actions/runs/18498629941/job/52709169125)
to
sui-typescript-aws-kms-test-env
[October 14, 2025 13:44](#event-20270505890) — with ![](https://avatars.githubusercontent.com/in/15368?s=40&u=167a342ed94d2a713daf64a8b476ead2cebe1852&v=4)
[GitHub Actions](https://github.com/apps/github-actions)

Inactive

[![@vercel](https://avatars.githubusercontent.com/in/8329?s=80&v=4)](/apps/vercel)

Copy link

### **[vercel](/apps/vercel) bot** commented [Oct 14, 2025](#issuecomment-3401974723) • edited Loading Uh oh! There was an error while loading. Please reload this page.

|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| The latest updates on your projects. Learn more about [Vercel for GitHub](https://vercel.link/github-learn-more).   | Project | Deployment | Preview | Comments | Updated (UTC) | | --- | --- | --- | --- | --- | | [sui-docs](https://vercel.com/sui-foundation/sui-docs) | [Ready](https://camo.githubusercontent.com/2d058aa4937109084c3b00dc259081ef9f01257a8504a292a286041635575d96/68747470733a2f2f76657263656c2e636f6d2f7374617469632f7374617475732f72656164792e737667) [Ready](https://vercel.com/sui-foundation/sui-docs/9kpmtEgiXG9jSda2KgT5St51ZTdE) | [Preview](https://sui-docs-git-graphql-alt-package-executio-b8ec73-sui-foundation.vercel.app) | [Comment](https://vercel.live/open-feedback/sui-docs-git-graphql-alt-package-executio-b8ec73-sui-foundation.vercel.app?via=pr-comment-feedback-link) | Dec 1, 2025 3:31pm |  2 Skipped Deployments   | Project | Deployment | Preview | Comments | Updated (UTC) | | --- | --- | --- | --- | --- | | [multisig-toolkit](https://vercel.com/mysten-labs/multisig-toolkit) | [Ignored](https://camo.githubusercontent.com/6af980227b4c827b4b58e336e17b2523b7763da7d328256138bdddcbbe31ecbb/68747470733a2f2f76657263656c2e636f6d2f7374617469632f7374617475732f63616e63656c65642e737667) [Ignored](https://vercel.com/mysten-labs/multisig-toolkit/5xkGThFkaafaZnaV7uRKLLPmaJFN) | [Preview](https://multisig-toolkit-git-graphql-alt-package-exe-3cf7ed-mysten-labs.vercel.app) |  | Dec 1, 2025 3:31pm | | [sui-kiosk](https://vercel.com/mysten-labs/sui-kiosk) | [Ignored](https://camo.githubusercontent.com/6af980227b4c827b4b58e336e17b2523b7763da7d328256138bdddcbbe31ecbb/68747470733a2f2f76657263656c2e636f6d2f7374617469632f7374617475732f63616e63656c65642e737667) [Ignored](https://vercel.com/mysten-labs/sui-kiosk/ANYGv5PqsapY8R6WGsWpCmRjQhvQ) | [Preview](https://sui-kiosk-git-graphql-alt-package-execution-context-mysten-labs.vercel.app) |  | Dec 1, 2025 3:31pm | |

All reactions

Sorry, something went wrong.

### Uh oh!

There was an error while loading. Please reload this page.

[![tpham-mysten](https://avatars.githubusercontent.com/u/214580142?s=60&v=4)](/tpham-mysten)

**[tpham-mysten](/tpham-mysten)**
commented
[Oct 14, 2025](#pullrequestreview-3335797434)

[View reviewed changes](/MystenLabs/sui/pull/23928/files)

[crates/sui-indexer-alt-graphql/src/api/types/simulation\_result.rs](/MystenLabs/sui/pull/23928/files#diff-4cb0eb82cd637563f19051cbafb95d651eee193992d8b5625111e6f688f59ba9)


Show resolved


Hide resolved

### Uh oh!

There was an error while loading. Please reload this page.

[![amnn](https://avatars.githubusercontent.com/u/332275?s=60&v=4)](/amnn)

**[amnn](/amnn)**
reviewed
[Oct 14, 2025](#pullrequestreview-3336723107)

[View reviewed changes](/MystenLabs/sui/pull/23928/files)

[crates/sui-indexer-alt-graphql/src/api/types/move\_package.rs](/MystenLabs/sui/pull/23928/files#diff-f5cbcd72e7104970c539b9a906241e1f3c1714599a46d71720f459892344d80c)


Show resolved


Hide resolved

### Uh oh!

There was an error while loading. Please reload this page.







[crates/sui-indexer-alt-graphql/src/api/types/simulation\_result.rs](/MystenLabs/sui/pull/23928/files#diff-4cb0eb82cd637563f19051cbafb95d651eee193992d8b5625111e6f688f59ba9)


Show resolved


Hide resolved

### Uh oh!

There was an error while loading. Please reload this page.







[crates/sui-indexer-alt-graphql/src/api/types/simulation\_result.rs](/MystenLabs/sui/pull/23928/files#diff-4cb0eb82cd637563f19051cbafb95d651eee193992d8b5625111e6f688f59ba9)


Show resolved


Hide resolved

### Uh oh!

There was an error while loading. Please reload this page.







[crates/sui-indexer-alt-graphql/src/scope.rs](/MystenLabs/sui/pull/23928/files#diff-5c6ef774ad773983a6e5bd4e3acff0b0aec0fa78be22b7414135581f35a28ca7)

Outdated
 


Show resolved


Hide resolved

### Uh oh!

There was an error while loading. Please reload this page.

[![@tpham-mysten](https://avatars.githubusercontent.com/u/214580142?s=40&u=934afb3c6ace1db6656b73c6f5310cd8205079a3&v=4)](/tpham-mysten)
[tpham-mysten](/tpham-mysten)
[temporarily deployed](https://github.com/MystenLabs/sui/actions/runs/18561975513/job/52912991523)
to
sui-typescript-aws-kms-test-env
[October 16, 2025 12:55](#event-20318288032) — with ![](https://avatars.githubusercontent.com/in/15368?s=40&u=167a342ed94d2a713daf64a8b476ead2cebe1852&v=4)
[GitHub Actions](https://github.com/apps/github-actions)

Inactive

[![tpham-mysten](https://avatars.githubusercontent.com/u/214580142?s=60&v=4)](/tpham-mysten)

**[tpham-mysten](/tpham-mysten)**
commented
[Oct 16, 2025](#pullrequestreview-3342946815)

[View reviewed changes](/MystenLabs/sui/pull/23928/files)

Copy link

Contributor

Author

### @tpham-mysten **[tpham-mysten](/tpham-mysten)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason
Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved
 
Hide comment

Thanks for the detailed review!

Sorry, something went wrong.

### Uh oh!

There was an error while loading. Please reload this page.

All reactions

[crates/sui-indexer-alt-graphql/src/api/types/move\_package.rs](/MystenLabs/sui/pull/23928/files#diff-f5cbcd72e7104970c539b9a906241e1f3c1714599a46d71720f459892344d80c)


Show resolved


Hide resolved

### Uh oh!

There was an error while loading. Please reload this page.







[crates/sui-indexer-alt-graphql/src/scope.rs](/MystenLabs/sui/pull/23928/files#diff-5c6ef774ad773983a6e5bd4e3acff0b0aec0fa78be22b7414135581f35a28ca7)

Outdated
 


Show resolved


Hide resolved

### Uh oh!

There was an error while loading. Please reload this page.







[crates/sui-indexer-alt-graphql/src/api/types/simulation\_result.rs](/MystenLabs/sui/pull/23928/files#diff-4cb0eb82cd637563f19051cbafb95d651eee193992d8b5625111e6f688f59ba9)


Show resolved


Hide resolved

### Uh oh!

There was an error while loading. Please reload this page.

[![@tpham-mysten](https://avatars.githubusercontent.com/u/214580142?s=40&u=934afb3c6ace1db6656b73c6f5310cd8205079a3&v=4)](/tpham-mysten)
[tpham-mysten](/tpham-mysten)
requested a review
from [amnn](/amnn)
[October 16, 2025 12:58](#event-20318350752)

[![@vercel](https://avatars.githubusercontent.com/in/8329?s=40&v=4)](/apps/vercel)
[vercel](/apps/vercel)
bot
[deployed](https://sui-docs-4rbprrseo-sui-foundation.vercel.app "Deployment has completed")
to
[Preview – sui-docs](https://sui-docs-4rbprrseo-sui-foundation.vercel.app)
[October 16, 2025 12:59](#event-20318365528)
[View deployment](https://sui-docs-4rbprrseo-sui-foundation.vercel.app)

[![@tpham-mysten](https://avatars.githubusercontent.com/u/214580142?s=40&u=934afb3c6ace1db6656b73c6f5310cd8205079a3&v=4)](/tpham-mysten)
[tpham-mysten](/tpham-mysten)
[temporarily deployed](https://github.com/MystenLabs/sui/actions/runs/18566542748/job/52929052532)
to
sui-typescript-aws-kms-test-env
[October 16, 2025 15:30](#event-20322179690) — with ![](https://avatars.githubusercontent.com/in/15368?s=40&u=167a342ed94d2a713daf64a8b476ead2cebe1852&v=4)
[GitHub Actions](https://github.com/apps/github-actions)

Inactive

[![@tpham-mysten](https://avatars.githubusercontent.com/u/214580142?s=40&u=934afb3c6ace1db6656b73c6f5310cd8205079a3&v=4)](/tpham-mysten)
[tpham-mysten](/tpham-mysten)
changed the title
~~[graphql-alt] Load just-published packages within MovePackage::with\_address~~
[graphql-alt] Load just-published packages within Object::with\_address
[Oct 16, 2025](#event-20322215241)

[![@vercel](https://avatars.githubusercontent.com/in/8329?s=40&v=4)](/apps/vercel)
[vercel](/apps/vercel)
bot
[deployed](https://sui-docs-53unv9fi4-sui-foundation.vercel.app "Deployment has completed")
to
[Preview – sui-docs](https://sui-docs-53unv9fi4-sui-foundation.vercel.app)
[October 16, 2025 15:32](#event-20322222984)
[View deployment](https://sui-docs-53unv9fi4-sui-foundation.vercel.app)

[![wlmyng](https://avatars.githubusercontent.com/u/127570466?s=60&v=4)](/wlmyng)

**[wlmyng](/wlmyng)**
reviewed
[Oct 17, 2025](#pullrequestreview-3342256841)

[View reviewed changes](/MystenLabs/sui/pull/23928/files)

[crates/sui-indexer-alt-e2e-tests/tests/graphql\_simulate\_transaction\_tests.rs](/MystenLabs/sui/pull/23928/files#diff-96b79f0903bac589d81d4ff10bf545d262aed63872078e5d7f1086218115a64f)


Show resolved


Hide resolved

### Uh oh!

There was an error while loading. Please reload this page.







[crates/sui-indexer-alt-graphql/src/api/types/move\_package.rs](/MystenLabs/sui/pull/23928/files#diff-f5cbcd72e7104970c539b9a906241e1f3c1714599a46d71720f459892344d80c)


Show resolved


Hide resolved

### Uh oh!

There was an error while loading. Please reload this page.







[crates/sui-indexer-alt-graphql/src/api/types/object.rs](/MystenLabs/sui/pull/23928/files#diff-423c13506c1753ce37303e0d583b7796ebf1e0343cc9e8f24d0470ae2de7ca38)

Outdated
 


Show resolved


Hide resolved

### Uh oh!

There was an error while loading. Please reload this page.







[crates/sui-indexer-alt-graphql/src/scope.rs](/MystenLabs/sui/pull/23928/files#diff-5c6ef774ad773983a6e5bd4e3acff0b0aec0fa78be22b7414135581f35a28ca7)


Show resolved


Hide resolved

### Uh oh!

There was an error while loading. Please reload this page.







[crates/sui-indexer-alt-graphql/src/scope.rs](/MystenLabs/sui/pull/23928/files#diff-5c6ef774ad773983a6e5bd4e3acff0b0aec0fa78be22b7414135581f35a28ca7)


Show resolved


Hide resolved

### Uh oh!

There was an error while loading. Please reload this page.

[![@tpham-mysten](https://avatars.githubusercontent.com/u/214580142?s=40&u=934afb3c6ace1db6656b73c6f5310cd8205079a3&v=4)](/tpham-mysten)
[tpham-mysten](/tpham-mysten)
[force-pushed](/MystenLabs/sui/compare/502ca0f9d185be2355af54521c9e18c19ddf56fc..b59eb0356d65179b36436db8d2afcc34e3aeb05d)
the

graphql-alt-package-execution-context
branch
from
[`502ca0f`](/MystenLabs/sui/commit/502ca0f9d185be2355af54521c9e18c19ddf56fc) to
[`b59eb03`](/MystenLabs/sui/commit/b59eb0356d65179b36436db8d2afcc34e3aeb05d)  [Compare](/MystenLabs/sui/compare/502ca0f9d185be2355af54521c9e18c19ddf56fc..b59eb0356d65179b36436db8d2afcc34e3aeb05d)
[October 21, 2025 00:30](#event-20391692808)

[![@vercel](https://avatars.githubusercontent.com/in/8329?s=40&v=4)](/apps/vercel)
[vercel](/apps/vercel)
bot
[deployed](https://sui-docs-mcgu43zer-sui-foundation.vercel.app "Deployment has completed")
to
[Preview – sui-docs](https://sui-docs-mcgu43zer-sui-foundation.vercel.app)
[October 21, 2025 00:34](#event-20391731041)
[View deployment](https://sui-docs-mcgu43zer-sui-foundation.vercel.app)

[![tpham-mysten](https://avatars.githubusercontent.com/u/214580142?s=60&v=4)](/tpham-mysten)

**[tpham-mysten](/tpham-mysten)**
commented
[Oct 21, 2025](#pullrequestreview-3348040447)

[View reviewed changes](/MystenLabs/sui/pull/23928/files)

Copy link

Contributor

Author

### @tpham-mysten **[tpham-mysten](/tpham-mysten)** left a comment • edited Loading Uh oh! There was an error while loading. Please reload this page.

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason
Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved
 
Hide comment

Thanks for the review and great catch for `execution_output_object_latest`. I have commented a few possible options that we could take to resolve it

Sorry, something went wrong.

### Uh oh!

There was an error while loading. Please reload this page.

All reactions

[crates/sui-indexer-alt-e2e-tests/tests/graphql\_simulate\_transaction\_tests.rs](/MystenLabs/sui/pull/23928/files#diff-96b79f0903bac589d81d4ff10bf545d262aed63872078e5d7f1086218115a64f)


Show resolved


Hide resolved

### Uh oh!

There was an error while loading. Please reload this page.







[crates/sui-indexer-alt-graphql/src/api/types/object.rs](/MystenLabs/sui/pull/23928/files#diff-423c13506c1753ce37303e0d583b7796ebf1e0343cc9e8f24d0470ae2de7ca38)

Outdated
 


Show resolved


Hide resolved

### Uh oh!

There was an error while loading. Please reload this page.







[crates/sui-indexer-alt-graphql/src/scope.rs](/MystenLabs/sui/pull/23928/files#diff-5c6ef774ad773983a6e5bd4e3acff0b0aec0fa78be22b7414135581f35a28ca7)


Show resolved


Hide resolved

### Uh oh!

There was an error while loading. Please reload this page.







[crates/sui-indexer-alt-graphql/src/scope.rs](/MystenLabs/sui/pull/23928/files#diff-5c6ef774ad773983a6e5bd4e3acff0b0aec0fa78be22b7414135581f35a28ca7)


Show resolved


Hide resolved

### Uh oh!

There was an error while loading. Please reload this page.

[![amnn](https://avatars.githubusercontent.com/u/332275?s=60&v=4)](/amnn)

**[amnn](/amnn)**
reviewed
[Oct 22, 2025](#pullrequestreview-3366204952)

[View reviewed changes](/MystenLabs/sui/pull/23928/files)

Copy link

Contributor

### @amnn **[amnn](/amnn)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason
Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved
 
Hide comment

Just the detail about deleted objects that we need to settle!

Sorry, something went wrong.

### Uh oh!

There was an error while loading. Please reload this page.

All reactions

[crates/sui-indexer-alt-e2e-tests/tests/graphql\_simulate\_transaction\_tests.rs](/MystenLabs/sui/pull/23928/files#diff-96b79f0903bac589d81d4ff10bf545d262aed63872078e5d7f1086218115a64f)

Outdated

|  |  |  |
| --- | --- | --- |
|  |  | } |
|  |  | } |
|  |  | } |
|  |  | events { |

Copy link

Contributor

### @amnn **[amnn](/amnn)** [Oct 22, 2025](#discussion_r2452393701)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason
Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved
 
Hide comment

This test made me wonder -- why do we expose the `events` directly on simulation result?

Sorry, something went wrong.

### Uh oh!

There was an error while loading. Please reload this page.

All reactions

Copy link

Contributor

Author

### @tpham-mysten **[tpham-mysten](/tpham-mysten)** [Nov 18, 2025](#discussion_r2536145043)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason
Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved
 
Hide comment

The original reason was just to make it consistent with gRPC `SimulateTransactionResponse`, and I agree it's not ideal. I have updated the PR to remove this `events` field from `SimulateResult` and will update the Release note before landing the PR

Sorry, something went wrong.

### Uh oh!

There was an error while loading. Please reload this page.

All reactions







[crates/sui-indexer-alt-graphql/src/scope.rs](/MystenLabs/sui/pull/23928/files#diff-5c6ef774ad773983a6e5bd4e3acff0b0aec0fa78be22b7414135581f35a28ca7)


Show resolved


Hide resolved

### Uh oh!

There was an error while loading. Please reload this page.







[crates/sui-indexer-alt-graphql/src/scope.rs](/MystenLabs/sui/pull/23928/files#diff-5c6ef774ad773983a6e5bd4e3acff0b0aec0fa78be22b7414135581f35a28ca7)

Outdated
 


Show resolved


Hide resolved

### Uh oh!

There was an error while loading. Please reload this page.

[![@tpham-mysten](https://avatars.githubusercontent.com/u/214580142?s=40&u=934afb3c6ace1db6656b73c6f5310cd8205079a3&v=4)](/tpham-mysten)
[tpham-mysten](/tpham-mysten)
[force-pushed](/MystenLabs/sui/compare/b59eb0356d65179b36436db8d2afcc34e3aeb05d..b84b91700972c2879a98618f531439b6988d749a)
the

graphql-alt-package-execution-context
branch
from
[`b59eb03`](/MystenLabs/sui/commit/b59eb0356d65179b36436db8d2afcc34e3aeb05d) to
[`b84b917`](/MystenLabs/sui/commit/b84b91700972c2879a98618f531439b6988d749a)  [Compare](/MystenLabs/sui/compare/b59eb0356d65179b36436db8d2afcc34e3aeb05d..b84b91700972c2879a98618f531439b6988d749a)
[November 18, 2025 03:01](#event-21002329207)

[![@tpham-mysten](https://avatars.githubusercontent.com/u/214580142?s=40&u=934afb3c6ace1db6656b73c6f5310cd8205079a3&v=4)](/tpham-mysten)
[tpham-mysten](/tpham-mysten)
[temporarily deployed](https://github.com/MystenLabs/sui/actions/runs/19452498213/job/55659858768)
to
sui-typescript-aws-kms-test-env
[November 18, 2025 03:01](#event-21002329969) — with ![](https://avatars.githubusercontent.com/in/15368?s=40&u=167a342ed94d2a713daf64a8b476ead2cebe1852&v=4)
[GitHub Actions](https://github.com/apps/github-actions)

Inactive

[![@tpham-mysten](https://avatars.githubusercontent.com/u/214580142?s=80&u=934afb3c6ace1db6656b73c6f5310cd8205079a3&v=4)](/tpham-mysten)

Copy link

Contributor

Author

### **[tpham-mysten](/tpham-mysten)** commented [Nov 18, 2025](#issuecomment-3544816993)

|  |
| --- |
| Sorry for the late resume on this PR! I have resolved all comments with some big changes:   1. Update local cache `execution_objects` in scope to use optional value 2. Remove `events` field from `SimulationResult` as it's already available in effects |

All reactions

Sorry, something went wrong.

### Uh oh!

There was an error while loading. Please reload this page.

[![@tpham-mysten](https://avatars.githubusercontent.com/u/214580142?s=40&u=934afb3c6ace1db6656b73c6f5310cd8205079a3&v=4)](/tpham-mysten)
[tpham-mysten](/tpham-mysten)
requested review from
[amnn](/amnn) and
[wlmyng](/wlmyng)
[November 18, 2025 03:04](#event-21002360605)

[![@vercel](https://avatars.githubusercontent.com/in/8329?s=40&v=4)](/apps/vercel)
[vercel](/apps/vercel)
bot
[deployed](https://sui-docs-j90h04xl7-sui-foundation.vercel.app "Deployment has completed")
to
[Preview – sui-docs](https://sui-docs-j90h04xl7-sui-foundation.vercel.app)
[November 18, 2025 03:07](#event-21002390109)
[View deployment](https://sui-docs-j90h04xl7-sui-foundation.vercel.app)

[![amnn](https://avatars.githubusercontent.com/u/332275?s=60&v=4)](/amnn)

**[amnn](/amnn)**
reviewed
[Nov 18, 2025](#pullrequestreview-3479589301)

[View reviewed changes](/MystenLabs/sui/pull/23928/files)

Copy link

Contributor

### @amnn **[amnn](/amnn)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason
Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved
 
Hide comment

Changes are looking good, I like the simplifications to the schema also, but PTAL at the questions around `expect`/`unwrap`.

Sorry, something went wrong.

### Uh oh!

There was an error while loading. Please reload this page.

All reactions

[crates/sui-indexer-alt-graphql/src/scope.rs](/MystenLabs/sui/pull/23928/files#diff-5c6ef774ad773983a6e5bd4e3acff0b0aec0fa78be22b7414135581f35a28ca7)

Outdated
 


Show resolved


Hide resolved

### Uh oh!

There was an error while loading. Please reload this page.







[crates/sui-indexer-alt-graphql/src/scope.rs](/MystenLabs/sui/pull/23928/files#diff-5c6ef774ad773983a6e5bd4e3acff0b0aec0fa78be22b7414135581f35a28ca7)

Outdated
 


Show resolved


Hide resolved

### Uh oh!

There was an error while loading. Please reload this page.

[![@tpham-mysten](https://avatars.githubusercontent.com/u/214580142?s=40&u=934afb3c6ace1db6656b73c6f5310cd8205079a3&v=4)](/tpham-mysten)
[tpham-mysten](/tpham-mysten)
[temporarily deployed](https://github.com/MystenLabs/sui/actions/runs/19490331275/job/55781161580)
to
sui-typescript-aws-kms-test-env
[November 19, 2025 04:58](#event-21032954261) — with ![](https://avatars.githubusercontent.com/in/15368?s=40&u=167a342ed94d2a713daf64a8b476ead2cebe1852&v=4)
[GitHub Actions](https://github.com/apps/github-actions)

Inactive

[![@vercel](https://avatars.githubusercontent.com/in/8329?s=40&v=4)](/apps/vercel)
[vercel](/apps/vercel)
bot
[deployed](https://sui-docs-27iaamppb-sui-foundation.vercel.app "Deployment has completed")
to
[Preview – sui-docs](https://sui-docs-27iaamppb-sui-foundation.vercel.app)
[November 19, 2025 05:00](#event-21032975563)
[View deployment](https://sui-docs-27iaamppb-sui-foundation.vercel.app)

[![tpham-mysten](https://avatars.githubusercontent.com/u/214580142?s=60&v=4)](/tpham-mysten)

**[tpham-mysten](/tpham-mysten)**
commented
[Nov 19, 2025](#pullrequestreview-3475181706)

[View reviewed changes](/MystenLabs/sui/pull/23928/files)

Copy link

Contributor

Author

### @tpham-mysten **[tpham-mysten](/tpham-mysten)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason
Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved
 
Hide comment

Thanks Ashok! I have deprecated those expect logic and replaced them by ".context" and "RpcError"

Sorry, something went wrong.

### Uh oh!

There was an error while loading. Please reload this page.

All reactions

[crates/sui-indexer-alt-graphql/src/scope.rs](/MystenLabs/sui/pull/23928/files#diff-5c6ef774ad773983a6e5bd4e3acff0b0aec0fa78be22b7414135581f35a28ca7)

Outdated
 


Show resolved


Hide resolved

### Uh oh!

There was an error while loading. Please reload this page.







[crates/sui-indexer-alt-graphql/src/scope.rs](/MystenLabs/sui/pull/23928/files#diff-5c6ef774ad773983a6e5bd4e3acff0b0aec0fa78be22b7414135581f35a28ca7)


Show resolved


Hide resolved

### Uh oh!

There was an error while loading. Please reload this page.







[crates/sui-indexer-alt-e2e-tests/tests/graphql\_simulate\_transaction\_tests.rs](/MystenLabs/sui/pull/23928/files#diff-96b79f0903bac589d81d4ff10bf545d262aed63872078e5d7f1086218115a64f)

Outdated

|  |  |  |
| --- | --- | --- |
|  |  | } |
|  |  | } |
|  |  | } |
|  |  | events { |

Copy link

Contributor

Author

### @tpham-mysten **[tpham-mysten](/tpham-mysten)** [Nov 18, 2025](#discussion_r2536145043)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason
Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved
 
Hide comment

The original reason was just to make it consistent with gRPC `SimulateTransactionResponse`, and I agree it's not ideal. I have updated the PR to remove this `events` field from `SimulateResult` and will update the Release note before landing the PR

Sorry, something went wrong.

### Uh oh!

There was an error while loading. Please reload this page.

All reactions







[crates/sui-indexer-alt-graphql/src/scope.rs](/MystenLabs/sui/pull/23928/files#diff-5c6ef774ad773983a6e5bd4e3acff0b0aec0fa78be22b7414135581f35a28ca7)

Outdated
 


Show resolved


Hide resolved

### Uh oh!

There was an error while loading. Please reload this page.







[crates/sui-indexer-alt-graphql/src/scope.rs](/MystenLabs/sui/pull/23928/files#diff-5c6ef774ad773983a6e5bd4e3acff0b0aec0fa78be22b7414135581f35a28ca7)

Outdated
 


Show resolved


Hide resolved

### Uh oh!

There was an error while loading. Please reload this page.

[![@tpham-mysten](https://avatars.githubusercontent.com/u/214580142?s=40&u=934afb3c6ace1db6656b73c6f5310cd8205079a3&v=4)](/tpham-mysten)
[tpham-mysten](/tpham-mysten)
[force-pushed](/MystenLabs/sui/compare/8b4ee634022f906c9ecd7574a4ed8253960b13ad..14245ddf4132358c35c9b6b3639e486cb5a8f649)
the

graphql-alt-package-execution-context
branch
from
[`8b4ee63`](/MystenLabs/sui/commit/8b4ee634022f906c9ecd7574a4ed8253960b13ad) to
[`14245dd`](/MystenLabs/sui/commit/14245ddf4132358c35c9b6b3639e486cb5a8f649)  [Compare](/MystenLabs/sui/compare/8b4ee634022f906c9ecd7574a4ed8253960b13ad..14245ddf4132358c35c9b6b3639e486cb5a8f649)
[November 19, 2025 05:07](#event-21033049287)

[![@tpham-mysten](https://avatars.githubusercontent.com/u/214580142?s=40&u=934afb3c6ace1db6656b73c6f5310cd8205079a3&v=4)](/tpham-mysten)
[tpham-mysten](/tpham-mysten)
[temporarily deployed](https://github.com/MystenLabs/sui/actions/runs/19490503539/job/55781646266)
to
sui-typescript-aws-kms-test-env
[November 19, 2025 05:07](#event-21033050101) — with ![](https://avatars.githubusercontent.com/in/15368?s=40&u=167a342ed94d2a713daf64a8b476ead2cebe1852&v=4)
[GitHub Actions](https://github.com/apps/github-actions)

Inactive

[![@tpham-mysten](https://avatars.githubusercontent.com/u/214580142?s=40&u=934afb3c6ace1db6656b73c6f5310cd8205079a3&v=4)](/tpham-mysten)
[tpham-mysten](/tpham-mysten)
requested a review
from [amnn](/amnn)
[November 19, 2025 05:08](#event-21033066524)

[![@vercel](https://avatars.githubusercontent.com/in/8329?s=40&v=4)](/apps/vercel)
[vercel](/apps/vercel)
bot
[deployed](https://sui-docs-n2k8efnm5-sui-foundation.vercel.app "Deployment has completed")
to
[Preview – sui-docs](https://sui-docs-n2k8efnm5-sui-foundation.vercel.app)
[November 19, 2025 05:09](#event-21033074820)
[View deployment](https://sui-docs-n2k8efnm5-sui-foundation.vercel.app)

[![@tpham-mysten](https://avatars.githubusercontent.com/u/214580142?s=40&u=934afb3c6ace1db6656b73c6f5310cd8205079a3&v=4)](/tpham-mysten)
[tpham-mysten](/tpham-mysten)
[temporarily deployed](https://github.com/MystenLabs/sui/actions/runs/19504719004/job/55827727773)
to
sui-typescript-aws-kms-test-env
[November 19, 2025 14:26](#event-21044412586) — with ![](https://avatars.githubusercontent.com/in/15368?s=40&u=167a342ed94d2a713daf64a8b476ead2cebe1852&v=4)
[GitHub Actions](https://github.com/apps/github-actions)

Inactive

[![@vercel](https://avatars.githubusercontent.com/in/8329?s=40&v=4)](/apps/vercel)
[vercel](/apps/vercel)
bot
[deployed](https://sui-docs-16k251k2y-sui-foundation.vercel.app "Deployment has completed")
to
[Preview – sui-docs](https://sui-docs-16k251k2y-sui-foundation.vercel.app)
[November 19, 2025 14:28](#event-21044462191)
[View deployment](https://sui-docs-16k251k2y-sui-foundation.vercel.app)

[![amnn](https://avatars.githubusercontent.com/u/332275?s=60&v=4)](/amnn)

**[amnn](/amnn)**
approved these changes
[Nov 20, 2025](#pullrequestreview-3489142339)

[View reviewed changes](/MystenLabs/sui/pull/23928/files/09f0299b030425a15497cd2cd9bbdbc8cd8a9923)

Copy link

Contributor

### @amnn **[amnn](/amnn)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason
Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved
 
Hide comment

Nice, ship it! Thanks [@tpham-mysten](https://github.com/tpham-mysten)

Sorry, something went wrong.

### Uh oh!

There was an error while loading. Please reload this page.

❤️
1
 tpham-mysten reacted with heart emoji

All reactions

* ❤️
  1 reaction

[tpham-mysten](/tpham-mysten)
added 7 commits
[December 1, 2025 09:57](#commits-pushed-f5f2f2e)

[![@tpham-mysten](https://avatars.githubusercontent.com/u/214580142?s=40&v=4)](/tpham-mysten)

`[graphql-alt] Load just-published packages within MovePackage::with_a…`

 …

`f5f2f2e`

```move
…ddress
```

[![@tpham-mysten](https://avatars.githubusercontent.com/u/214580142?s=40&v=4)](/tpham-mysten)

`Move scope with execution context to execution side`

`ae5d20f`

[![@tpham-mysten](https://avatars.githubusercontent.com/u/214580142?s=40&v=4)](/tpham-mysten)

`Update range`

`327137e`

[![@tpham-mysten](https://avatars.githubusercontent.com/u/214580142?s=40&v=4)](/tpham-mysten)

`fix-up`

`b5369ed`

[![@tpham-mysten](https://avatars.githubusercontent.com/u/214580142?s=40&v=4)](/tpham-mysten)

`Update execution_objects to optional value and remove events field fr…`

 …

`c72c2f1`

```move
…om SimulateResult
```

[![@tpham-mysten](https://avatars.githubusercontent.com/u/214580142?s=40&v=4)](/tpham-mysten)

`Add RpcError to extract_objects_from_executed_transaction`

`56f8e87`

[![@tpham-mysten](https://avatars.githubusercontent.com/u/214580142?s=40&v=4)](/tpham-mysten)

`fix test`

`09f0299`

[![@tpham-mysten](https://avatars.githubusercontent.com/u/214580142?s=40&u=934afb3c6ace1db6656b73c6f5310cd8205079a3&v=4)](/tpham-mysten)
[tpham-mysten](/tpham-mysten)
[force-pushed](/MystenLabs/sui/compare/a73a881bd247211d2ce207842d97c741db696869..09f0299b030425a15497cd2cd9bbdbc8cd8a9923)
the

graphql-alt-package-execution-context
branch
from
[`a73a881`](/MystenLabs/sui/commit/a73a881bd247211d2ce207842d97c741db696869) to
[`09f0299`](/MystenLabs/sui/commit/09f0299b030425a15497cd2cd9bbdbc8cd8a9923)  [Compare](/MystenLabs/sui/compare/a73a881bd247211d2ce207842d97c741db696869..09f0299b030425a15497cd2cd9bbdbc8cd8a9923)
[December 1, 2025 14:58](#event-21278595885)

[![@tpham-mysten](https://avatars.githubusercontent.com/u/214580142?s=40&u=934afb3c6ace1db6656b73c6f5310cd8205079a3&v=4)](/tpham-mysten)
[tpham-mysten](/tpham-mysten)
[temporarily deployed](https://github.com/MystenLabs/sui/actions/runs/19827001901/job/56802866450)
to
sui-typescript-aws-kms-test-env
[December 1, 2025 14:58](#event-21278597844) — with ![](https://avatars.githubusercontent.com/in/15368?s=40&u=167a342ed94d2a713daf64a8b476ead2cebe1852&v=4)
[GitHub Actions](https://github.com/apps/github-actions)

Inactive

[![@vercel](https://avatars.githubusercontent.com/in/8329?s=40&v=4)](/apps/vercel)
[vercel](/apps/vercel)
bot
[deployed](https://sui-docs-d2b73euit-sui-foundation.vercel.app "Deployment has completed")
to
[Preview – sui-docs](https://sui-docs-d2b73euit-sui-foundation.vercel.app)
[December 1, 2025 15:03](#event-21278755914)
[View deployment](https://sui-docs-d2b73euit-sui-foundation.vercel.app)

[![@tpham-mysten](https://avatars.githubusercontent.com/u/214580142?s=40&v=4)](/tpham-mysten)

`fix snapshot`

`be61fea`

[![@tpham-mysten](https://avatars.githubusercontent.com/u/214580142?s=40&u=934afb3c6ace1db6656b73c6f5310cd8205079a3&v=4)](/tpham-mysten)
[tpham-mysten](/tpham-mysten)
[temporarily deployed](https://github.com/MystenLabs/sui/actions/runs/19828004562/job/56806362157)
to
sui-typescript-aws-kms-test-env
[December 1, 2025 15:29](#event-21279486363) — with ![](https://avatars.githubusercontent.com/in/15368?s=40&u=167a342ed94d2a713daf64a8b476ead2cebe1852&v=4)
[GitHub Actions](https://github.com/apps/github-actions)

Inactive

[![@vercel](https://avatars.githubusercontent.com/in/8329?s=40&v=4)](/apps/vercel)
[vercel](/apps/vercel)
bot
[deployed](https://sui-docs-mysbmvp4t-sui-foundation.vercel.app "Deployment has completed")
to
[Preview – sui-docs](https://sui-docs-mysbmvp4t-sui-foundation.vercel.app)
[December 1, 2025 15:31](#event-21279548240)
[View deployment](https://sui-docs-mysbmvp4t-sui-foundation.vercel.app)

Hide details
View details
[![@tpham-mysten](https://avatars.githubusercontent.com/u/214580142?s=40&u=934afb3c6ace1db6656b73c6f5310cd8205079a3&v=4)](/tpham-mysten)
[tpham-mysten](/tpham-mysten)
merged commit [`7ae4447`](/MystenLabs/sui/commit/7ae4447a463ba75a8fd88fdf61358e54bf8ffc4b)
into

main
[Dec 1, 2025](https://github.com/MystenLabs/sui/pull/23928#event-21280862517)

71 of 73 checks passed

### Uh oh!

There was an error while loading. Please reload this page.

[![@tpham-mysten](https://avatars.githubusercontent.com/u/214580142?s=40&u=934afb3c6ace1db6656b73c6f5310cd8205079a3&v=4)](/tpham-mysten)
[tpham-mysten](/tpham-mysten)
deleted the

graphql-alt-package-execution-context
 
branch
[December 1, 2025 16:22](#event-21280864418)

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2FMystenLabs%2Fsui%2Fpull%2F23928)

### Reviewers

[![@amnn](https://avatars.githubusercontent.com/u/332275?s=40&v=4)](/amnn) [amnn](/amnn)

amnn approved these changes

[![@henryachen](https://avatars.githubusercontent.com/u/8963934?s=40&v=4)](/henryachen) [henryachen](/henryachen)






 Awaiting requested review from henryachen






 henryachen is a code owner automatically assigned from MystenLabs/devx-indexers-and-rpcs

[![@emmazzz](https://avatars.githubusercontent.com/u/14351986?s=40&v=4)](/emmazzz) [emmazzz](/emmazzz)






 Awaiting requested review from emmazzz






 emmazzz is a code owner automatically assigned from MystenLabs/devx-indexers-and-rpcs

[![@evan-wall-mysten](https://avatars.githubusercontent.com/u/219740240?s=40&v=4)](/evan-wall-mysten) [evan-wall-mysten](/evan-wall-mysten)






 Awaiting requested review from evan-wall-mysten






 evan-wall-mysten is a code owner automatically assigned from MystenLabs/devx-indexers-and-rpcs

[![@wlmyng](https://avatars.githubusercontent.com/u/127570466?s=40&v=4)](/wlmyng) [wlmyng](/wlmyng)






 Awaiting requested review from wlmyng

### Assignees

No one assigned

### Labels

None yet

### Projects

None yet

### Milestone

No milestone

### Development

Successfully merging this pull request may close these issues.

### Uh oh!

There was an error while loading. Please reload this page.

### 4 participants

[![@tpham-mysten](https://avatars.githubusercontent.com/u/214580142?s=52&v=4)](/tpham-mysten) [![@amnn](https://avatars.githubusercontent.com/u/332275?s=52&v=4)](/amnn) [![@wlmyng](https://avatars.githubusercontent.com/u/127570466?s=52&v=4)](/wlmyng)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

You can’t perform that action at this time.